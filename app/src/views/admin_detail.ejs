<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>관리자페이지</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>

<body>
  <div class="container py-5">
    <div class="card mx-auto" style="max-width: 800px;">
        <div class="card-body">
            <div class="d-flex justify-content-center mb-4">
                <img src="https://via.placeholder.com/150" alt="Profile Picture" class="rounded-circle shadow">
            </div>
            <h1 class="text-center"><%=data.제목%></h1>
            <hr>
            <div class="mb-3">
                <span class="fw-bold me-2">게시물번호:</span><%=data._id%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">감독:</span> <%=data.감독%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">주연:</span><%=data.주연%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">출시년도:</span><%=data.출시년도%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">장르:</span><%=data.장르%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">설명:</span><%=data.설명%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">작성날짜:</span> <%=data.작성날짜%>
            </div>
            <div class="mb-3">
                <span class="fw-bold me-2">수정날짜:</span><%=data.수정날짜%>
            </div>
            
            <div class="text-center" id="button">
              <button class="btn btn-primary me-3" onclick="location.href='/admin/edit/<%= data._id %>'">수정</button>
              <button class="btn btn-danger me-3" data-id="<%= data._id %>" id="delete">삭제</button>      
        </div>
    </div>
</div>
    
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  <script>
    $('#delete').click(function (e) {
      var number = e.target.dataset.id;
      $.ajax({
        method: 'PUT',
        url: '/admin/detail/delete',
        data: { _id: number }
      }).done(function (result) {
        alert('삭제요청 성공')
        window.location.replace("/admin/list")
      }).fail(function (xhr, textStatus, errorThrown) {
        console.log(xhr, textStatus, errorThrown);  // 실패시 실행할 코드
      });
    });
  </script>
</body>

</html>