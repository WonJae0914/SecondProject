<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>관리자페이지</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      /* Body styles */
      body {
        font-size: 16px;
        line-height: 1.5;
      }
      
      /* Header styles */
      header {
        background-color: #333;
        color: #fff;
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
        margin-bottom: 10px;
      }
      
      
      /* Main styles */
      main {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      
      article {
        background-color: #fff;
        border: 1px solid #ddd;
        margin-bottom: 20px;
        padding: 20px;
      }
      
      h2 {
        font-size: 32px;
        margin-bottom: 10px;
      }
      
      p {
        font-size: 18px;
        margin-bottom: 10px;
      }
      
      footer {
        background-color: #333;
        color: #fff;
        padding: 10px;
        text-align: center;
      }
        </style>
      </head>
      <body>
        <header>
          <h1>상세 보기</h1>
        </header>
        <main>
          <article>
            <header>
              <h2><%= data.제목 %></h2>
              <p><%= data.출시년도 %></p>
            </header>
            <section>
              <p> <%= data.설명 %></p>
              <p>작성일 :  <%= data.작성날짜 %></p>
              <% if( data.수정날짜 ){ %>
                <p>최종 수정날짜 : <%= data.수정날짜 %></p>
                <% } %>
              
            </section>
            <footer>
              <p>감독 <%= data.감독 %> • 주연 <%= data.주연 %></p>
            </footer>
          </article>
        </main>
  <button onclick="location.href='/admin/edit/<%= data._id %>'">수정</button>
  <button data-id="<%= data._id %>" class="delete">삭제</button>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  <script>
    $('.delete').click(function (e) {
      var number = e.target.dataset.id;
      $.ajax({
        method: 'PUT',
        url: '/admin/detail/delete',
        data: { _id: number },
        // async: false
      }).done(function (result) {
        alert('삭제요청 성공했음');
        window.location.replace("/admin/list")
      }).fail(function (xhr, textStatus, errorThrown) {
        console.log(xhr, textStatus, errorThrown);  // 실패시 실행할 코드
      });
    });
  </script>
</body>
</html>