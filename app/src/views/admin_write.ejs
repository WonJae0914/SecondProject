<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>관리자페이지</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
  <h4 class="container mt-4"><strong>영상 업로드</strong></h4>
  <div class="container mt-3">
    <form action="/admin/write/add" method="POST" enctype="multipart/form-data" id="form1">
      <div class="form-group">
        <div class="mb-3">
          <label for="title" class="form-label">제목</label>
          <input type="text" class="form-control" placeholder="영상제목" name="title" id="title">
        </div>
        <div class="mb-3">
          <label for="director" class="form-label">감독</label>
          <input type="text" class="form-control" placeholder="감독" name="director" id="director">
        </div>
        <div class="mb-3">
          <label for="actor" class="form-label">주연배우</label>
          <input type="text" class="form-control" placeholder="주연배우" name="actor" id="actor">
        </div>
        <label for="year" class="form-label">출시년도</label>
        <select class="form-select mb-3" aria-label="Default select example" name="year" id="year" style="width:30%;">
          <% for (var i=new Date().getFullYear(); i>= 1980; i--) { %>
            <option value="<%= i %>">
              <%= i %>
            </option>
            <% } %>
        </select>

        <label for="category" class="form-label">장르</label>

        <select class="form-select mb-3" aria-label="Default select example" name="category" id="category"
          style="width:30%;">
          <option value="액션호러">액션호러</option>
          <option value="코미디호러">코미디호러</option>
          <option value="심리호러">심리호러</option>
          <option value="초자연호러">초자연호러</option>
          <option value="고딕호러">고딕호러</option>
          <option value="슬래셔">슬래셔</option>
        </select>
        <div class="mb-3">
          <label for="desc" class="form-label">설명</label>
          <textarea class="form-control" name="description" id="desc" rows="3" placeholder="영상내용"></textarea>
        </div>
      </div>
      <label for="profile"> 영상업로드 MP4
        <input class="form-control mb-3" type="file" id="movie" name="profile" accept="video/*">
      </label>
      <label for="profileImg"> 포스터업로드 jpg, jpeg, png
        <input class="form-control mb-3" type="file" id="img" name="profileImg" accept="image/*">
      </label>
      <br>
      <button type="submit" class="btn btn-outline-primary">Submit</button>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script>
    let form = document.querySelector('#form1');
    form.addEventListener('submit', function (event) {
      let title = document.querySelector('#title').value;
      let director = document.querySelector('#director').value;
      let actor = document.querySelector('#actor').value;
      let year = document.querySelector('#year').value;
      let category = document.querySelector('#category').value;
      let desc = document.querySelector('#desc').value;
      let movie = document.querySelector('#movie').value;
      let img = document.querySelector('#img').value;
      var mp4Reg = /\w+\.mp4/;
      var imgReg = /\w+\.(jpe?g|png)/;
      if (!title) {
        alert("제목을 작성하세요");
        event.preventDefault();
      } else if (!director) {
        alert("감독을 작성하세요");
        event.preventDefault();
      }
      else if (!actor) {
        alert("주연배우를 작성하세요");
        event.preventDefault();
      }
      else if (!year) {
        alert("출시년도를 선택하세요");
        event.preventDefault();
      }
      else if (!category) {
        alert("장르를 선택하세요");
        event.preventDefault();
      }
      else if (!desc) {
        alert("내용을 작성하세요");
        event.preventDefault();
      }
      else if (!mp4Reg.test(movie) || !movie) {
        alert("영상을 업로드 해주세요.");
        event.preventDefault();
      }
      else if (!imgReg.test(img) || !img) {
        alert("포스터를 선택하세요");
        event.preventDefault();
      }
      else {
        alert("작성이 완료되었습니다.");
      }
    });
  </script>
</body>

</html>