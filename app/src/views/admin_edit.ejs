<%- include('admin_nav.ejs') %>

    <h4 class="container mt-4"><strong>글 수정페이지</strong></h4>
    <div class="container mt-3">
        <div class="form-group">
            <form action="/admin/edit?_method=PUT" method="POST" id="form1">
                <input type="text" name="id" value="<%= post._id %>" style="display:none;">
                <div class="form-group">

                    <div class="mb-3">
                        <label for="title" class="form-label">제목</label>
                        <input type="text" class="form-control" value="<%=post.제목%>" name="title" id="title">
                    </div>
                    <div class="mb-3">
                        <label for="director" class="form-label">감독</label>
                        <input type="text" class="form-control" value="<%=post.감독%>" name="director" id="director">
                    </div>
                    <div class="mb-3">
                        <label for="actor" class="form-label">주연배우</label>
                        <input type="text" class="form-control" value="<%=post.주연%>" name="actor" id="actor">
                    </div>

                    <div class="row row-cols-4">
                        <div class="col">
                            <label for="year" class="form-label">출시년도</label>
                            <select class="form-select mb-3" aria-label="Default select example" name="year" id="year">
                                <option value="<%= post.출시년도 %>" selected>
                                    <%= post.출시년도 %>
                                </option>
                                <% for (var i=new Date().getFullYear(); i>= 1980; i--) { %>
                                    <option value="<%= i %>">
                                        <%= i %>
                                    </option>
                                    <% } %>
                            </select>
                        </div>
                        <div class="col">
                            <label for="category" class="form-label">장르</label>
                            <select class="form-select mb-3" aria-label="Default select example" name="category">
                                <option value="<%= post.장르 %>" selected>
                                    <%= post.장르 %>
                                </option>
                                <option value="액션호러">액션호러</option>
                                <option value="코미디호러">코미디호러</option>
                                <option value="심리호러">심리호러</option>
                                <option value="초자연호러">초자연호러</option>
                                <option value="고딕호러">고딕호러</option>
                                <option value="슬래셔">슬래셔</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="desc" class="form-label">설명</label>
                        <textarea class="form-control" name="description" id="desc" rows="3"><%= post.설명 %></textarea>
                    </div>
                </div>
                <p style="color: crimson; ">👻 파일수정은 불가능 합니다. 해당 게시물 삭제 후 재업로드 해주세요.👻</p>
                <br>
                <button type="submit" class="btn btn-outline-primary">Submit</button>
            </form>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script>
        let form = document.querySelector('#form1');
        form.addEventListener('submit', function (event) {
            let title = document.querySelector('#title').value;
            let director = document.querySelector('#director').value;
            let actor = document.querySelector('#actor').value;
            let year = document.querySelector('#year').value;
            let category = document.querySelector('#category').value;
            let desc = document.querySelector('#desc').value;
            if (!title) {
                alert("제목을 작성하세요");
                event.preventDefault();
            } else if (!director) {
                alert("감독을 작성하세요");
                event.preventDefault();
            }
            else if (!actor) {
                alert("주연배우를 작성하세요");
                event.preventDefault();
            }
            else if (!year) {
                alert("출시년도를 선택하세요");
                event.preventDefault();
            }
            else if (!category) {
                alert("장르를 선택하세요");
                event.preventDefault();
            }
            else if (!desc) {
                alert("내용을 작성하세요");
                event.preventDefault();
            }
            else {
                alert("작성이 완료되었습니다.");
            }
        });
    </script>
    </body>

    </html>